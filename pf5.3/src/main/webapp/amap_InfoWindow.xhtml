<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <script src="http://webapi.amap.com/maps?v=1.3"
                        type="text/javascript"></script>
                <title>AMap InfoWindow</title>
            </f:facet>
        </h:head>       
        
        <h:body>
            <h:form>       
            <p:amap id="amap" center="116.397,39.907" zoom="15" style="width:100%;height:400px" model="#{infoWindowViews.advancedModel}" >
            <p:ajax event="overlaySelect" listener="#{infoWindowViews.onMarkerSelect}"/>
            <p:amapInfoWindow id="infoWindow" Custom="true" offset ="16, -45" closeWhenClickMap="true">
                <p:outputPanel style="text-align: center; display: block; margin: auto">
                     <h:panelGrid columns="1" cellpadding ="2">
                         <p:graphicImage name="/demo/images/#{infoWindowViews.marker.data}" height="150" />
                         <h:outputText value="#{infoWindowViews.marker.title}" />
                         
                    </h:panelGrid>
                </p:outputPanel>
            </p:amapInfoWindow>
            </p:amap>
 
    <!-- Preload for demo -->
    <p:outputPanel style="display:none">
        <p:graphicImage name="/demo/images/man.png" />
    </p:outputPanel>
            </h:form>
        </h:body>
    </f:view>

</html>